var mapObject,directionsDisplay,directionsService=new google.maps.DirectionsService,initMaps=function(){var e='<i class="fa fa-cog fa-spin fa-lg"></i>',o='<i class="fa fa-location-arrow fa-lg"></i>',t=$("#startAddress");if("undefined"==typeof navigator.geolocation)return void $("#error").text("Your browser doesn't support the Geolocation API");directionsDisplay=new google.maps.DirectionsRenderer;var a={zoom:10,center:new google.maps.LatLng(-43.429944,172.705426),mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!0,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT},scaleControl:!1,mapTypeControl:!1};mapObject=new google.maps.Map(document.getElementById("map-canvas"),a),directionsDisplay.setMap(mapObject),directionsDisplay.setPanel(document.getElementById("directions-panel")),$("#geo-detect-link").click(function(a){a.preventDefault();var n=$(this);n.html(e),navigator.geolocation.getCurrentPosition(function(e){var a=new google.maps.Geocoder;a.geocode({location:new google.maps.LatLng(e.coords.latitude,e.coords.longitude)},function(e,a){var i=e[0].formatted_address;a==google.maps.GeocoderStatus.OK?(t.val(i),calculateRoute(),n.html(o)):$("#error").append("Unable to retrieve your address<br />")})},function(e){$("#error").append("Error: "+e.message+"<br />")},{enableHighAccuracy:!0,timeout:1e4})}),$("#calculate-route").submit(function(e){e.preventDefault(),calculateRoute(t.val())})},calculateRoute=function(){var e="110 Heyders Road, Bottle Lake, Christchurch 8083, New Zealand",o=$("#startAddress").val(),t={origin:o,destination:e,travelMode:google.maps.DirectionsTravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC};directionsService.route(t,function(e,o){o==google.maps.DirectionsStatus.OK?directionsDisplay.setDirections(e):$("#error").text("This address is invalid.")})};$(document).foundation({tooltip:{disable_for_touch:!0},orbit:{animation:"fade",timer_speed:2500,pause_on_hover:!0,animation_speed:500,navigation_arrows:!1,bullets:!1,slide_number:!1,resume_on_mouseout:!0}}),$(document).ready(function(){$("#ec-countdown").countdown({until:new Date("April 17, 2014 20:00:00"),compactLabels:["y","m","w","Days"],compact:!0}),$("#ec-countdown-text").countdown({until:new Date("April 17, 2014 20:00:00"),format:"d",compactLabels:["y","m","w"," days;"],compact:!0}),$("a.fancybox").fancybox({defaults:{padding:0,width:1280,height:720},helpers:{media:!0,overlay:{locked:!1}},youtube:{autoplay:1}}),$("#faq-table").dataTable(),$("img.gallery-photo").unveil(100)});